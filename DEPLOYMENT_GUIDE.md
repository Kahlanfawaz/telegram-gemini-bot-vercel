# دليل نشر بوت تليجرام على Vercel

هذا الدليل يوضح كيفية نشر بوت تليجرام الذي يعمل بتقنية Gemini AI على منصة **Vercel** مجانًا، باستخدام آلية **Webhooks** لضمان التشغيل الدائم.

## المتطلبات

1.  حساب **GitHub** أو **GitLab** أو **Bitbucket**.
2.  حساب **Vercel** (يمكن التسجيل باستخدام حساب GitHub).
3.  توكن بوت تليجرام (`TELEGRAM_BOT_TOKEN`).
4.  مفتاح Gemini API (`GEMINI_API_KEY`).

## الخطوة 1: إعداد ملفات المشروع

تأكد من أن لديك الملفات التالية في مجلد المشروع:

| الملف | الوصف |
| :--- | :--- |
| `app.py` | كود البوت المعدل للعمل بآلية Webhooks باستخدام Flask. |
| `requirements.txt` | قائمة بالمكتبات المطلوبة، بما في ذلك `Flask`. |
| `vercel.json` | ملف تكوين Vercel لتحديد كيفية بناء ونشر التطبيق. |

## الخطوة 2: رفع المشروع إلى GitHub

1.  قم بإنشاء مستودع (Repository) جديد على GitHub.
2.  قم برفع ملفات المشروع (`app.py`, `requirements.txt`, `vercel.json`, `README.md`) إلى هذا المستودع.

## الخطوة 3: النشر على Vercel

1.  **ربط المستودع:**
    *   سجل الدخول إلى حسابك في Vercel.
    *   انقر على **"Add New..."** ثم **"Project"**.
    *   اختر المستودع الذي قمت بإنشائه في الخطوة السابقة.
    *   انقر على **"Import"**.

2.  **تكوين المشروع:**
    *   في صفحة تكوين المشروع، تأكد من أن **Root Directory** صحيح (عادةً ما يكون فارغًا إذا كانت الملفات في الجذر).
    *   انقر على **"Environment Variables"** (متغيرات البيئة).

3.  **إضافة متغيرات البيئة:**
    أضف المتغيرات التالية:

    | الاسم (Name) | القيمة (Value) |
    | :--- | :--- |
    | `TELEGRAM_BOT_TOKEN` | توكن البوت الخاص بك. |
    | `GEMINI_API_KEY` | مفتاح Gemini API الخاص بك. |

4.  **النشر (Deploy):**
    *   انقر على **"Deploy"**.
    *   انتظر حتى تكتمل عملية النشر. بمجرد الانتهاء، ستحصل على رابط (Domain) لمشروعك (مثال: `https://my-gemini-bot.vercel.app`).

## الخطوة 4: إعداد Webhook في تليجرام

بعد النشر، يجب إخبار تليجرام بالرابط الذي يجب أن يرسل إليه التحديثات (الرسائل).

1.  **الحصول على رابط Webhook:**
    رابط Webhook الخاص بك سيكون بالصيغة التالية:
    `https://<رابط مشروعك على Vercel>/<توكن البوت>`

    **مثال:** إذا كان رابط مشروعك هو `https://my-gemini-bot.vercel.app` وتوكن البوت هو `123456:ABC-DEF`, فإن رابط Webhook هو:
    `https://my-gemini-bot.vercel.app/123456:ABC-DEF`

2.  **تعيين Webhook:**
    افتح متصفح الويب واستخدم الرابط التالي لتعيين Webhook:

    `https://api.telegram.org/bot<توكن البوت>/setWebhook?url=<رابط Webhook بالكامل>`

    **مثال (باستخدام المثال أعلاه):**
    `https://api.telegram.org/bot123456:ABC-DEF/setWebhook?url=https://my-gemini-bot.vercel.app/123456:ABC-DEF`

    عند زيارة هذا الرابط، يجب أن تحصل على رد JSON يشير إلى أن `ok` هي `true` وأن `description` هي `Webhook was set`.

## الخطوة 5: اختبار البوت

الآن، يمكنك العودة إلى تليجرام وإرسال رسالة إلى البوت الخاص بك. يجب أن يعمل بشكل دائم ومستقر على Vercel.

---
**ملاحظة هامة:** في حال قمت بتغيير توكن البوت أو مفتاح Gemini API، يجب عليك تحديث متغيرات البيئة في إعدادات مشروعك على Vercel.
